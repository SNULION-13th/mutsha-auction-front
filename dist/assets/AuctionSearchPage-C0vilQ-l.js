import{u as p,j as e,C as g,B as j,r as m,a as b}from"./index-Bg_FgRHp.js";import{L as N}from"./logo_white-B5195eUO.js";function v({id:t,img:i,title:s,description:c,current_price:a}){const n=p();return e.jsxs("div",{className:"w-full h-109 flex flex-col bg-white shadow-lg rounded-xl",children:[e.jsx("img",{src:i,className:"w-full h-68 object-cover rounded-t-xl"}),e.jsxs("div",{className:"w-full flex flex-col gap-1.5 px-6 py-5",children:[e.jsx("div",{className:"text-lg font-bold text-scale-600",children:s}),e.jsx("div",{className:"text-base text-scale-400 truncate max-w-70",children:c})]}),e.jsxs("div",{className:"w-full flex px-6 justify-between items-center",children:[e.jsxs("div",{className:"flex flex-col gap-1",children:[e.jsx("div",{className:"text-base font-bold text-scale-400",children:"현재 입찰가"}),e.jsxs("div",{className:"flex gap-1 items-center",children:[e.jsx("img",{src:g,className:"w-6"}),e.jsxs("div",{className:"text-xl font-bold text-brand-primary",children:[a,"잔"]})]})]}),e.jsxs(j,{variant:"primary",className:"flex gap-2.5 p-2.5 w-27.5 h-9.5 items-center justify-center",onClick:()=>n(`/auction/${t}`),children:[e.jsx("img",{src:N,className:"w-4"}),e.jsx("div",{className:"text-base font-bold text-bg-white",children:"입찰"})]})]})]})}function w(t,i){const s=[],c=a=>s.push(a);if(i<=7){for(let a=1;a<=i;a++)c(a);return s}c(1),t>3&&c("...");for(let a=Math.max(2,t-1);a<=Math.min(i-1,t+1);a++)c(a);return t<i-2&&c("..."),c(i),s}function y({totalItems:t,pageSize:i=6,currentPage:s,onPageChange:c,className:a=""}){const n=Math.max(1,Math.ceil(t/i)),x=w(s,n);if(n<=1)return null;const d="h-8 min-w-8 px-2 rounded-full text-base flex items-center justify-center transition",o="text-scale-300 bg-transparent cursor-not-allowed border border-transparent",u="text-scale-500 hover:text-scale-600 hover:bg-scale-100 border border-transparent",l="bg-brand-primary text-bg-white font-bold";return e.jsxs("div",{className:`w-full flex items-center justify-center gap-2 ${a}`,children:[e.jsx("button",{className:`${d} ${s===1?o:u}`,disabled:s===1,onClick:()=>c(Math.max(1,s-1)),children:"‹"}),x.map((r,h)=>r==="..."?e.jsx("span",{className:`${d} ${o}`,children:"…"},`e${h}`):e.jsx("button",{onClick:()=>c(r),className:`${d} ${r===s?l:u}`,children:r},r)),e.jsx("button",{className:`${d} ${s===n?o:u}`,disabled:s===n,onClick:()=>c(Math.min(n,s+1)),children:"›"})]})}function $(t){if(!t)return"";if(/^https?:\/\//i.test(t))return t;const i="",s=String(t).replace(/^\/+/,"")||"";return`${i}/${s}`}const f=6;function M(t){const i=t.image_file||t.image_file_url||t.image_url||"";return $(i)}function E(){const[t,i]=m.useState([]),[s,c]=m.useState(!0),[a,n]=m.useState(null),[x,d]=m.useState(1);m.useEffect(()=>{async function l(){try{c(!0);const r=await b({status:"active"});i(r)}catch(r){console.error(r),n("경매 목록 불러오기 실패")}finally{c(!1)}}l()},[]);const o=t.length,u=m.useMemo(()=>{const l=(x-1)*f;return t.slice(l,l+f)},[t,x]);return m.useEffect(()=>{const l=Math.max(1,Math.ceil(o/f));x>l&&d(l)},[o,x]),e.jsx("div",{className:"w-full px-50 py-30",children:e.jsxs("div",{className:"max-w-[1062px] flex flex-col mx-auto gap-25",children:[e.jsxs("div",{className:"flex flex-col gap-5",children:[e.jsx("div",{className:"text-5xl font-bold text-scale-600",children:"경매 입찰하기"}),e.jsx("div",{className:"text-2xl text-scale-400",children:"멋사 구성원들의 애착템에 입찰해보세요!"})]}),s?e.jsx("div",{className:"text-center text-scale-400 py-20",children:"불러오는 중 ..."}):a?e.jsx("div",{className:"text-center text-point-warning py-20",children:a}):o===0?e.jsx("div",{className:"text-center text-scale-400 py-20",children:"아직 진행 중인 경매가 없어요."}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"grid grid-cols-3 gap-6 min-h-[900px]",children:u.map(l=>e.jsx(v,{id:l.id,img:M(l),title:l.title,description:l.description,current_price:l.current_price},l.id))}),e.jsx(y,{totalItems:o,pageSize:f,currentPage:x,onPageChange:d,className:"mt-8"})]})]})})}export{E as default};

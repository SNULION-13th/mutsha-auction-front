import{u as m,q as u,r,t as f,j as e,B as o}from"./index-Bg_FgRHp.js";function j(){const s=m(),[a]=u(),t=r.useRef(!1),[n,c]=r.useState("pending"),{mutateAsync:d,error:x}=f();return h(n==="success"),r.useEffect(()=>{if(t.current)return;t.current=!0,(async()=>{try{c("pending");const l=a.get("pg_token"),i=localStorage.getItem("tid");if(!l||!i)throw new Error("결제 정보가 올바르지 않습니다.");await d({pg_token:l,tid:i}),c("success")}catch{c("error")}})()},[]),n==="pending"?e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-bg-default",children:e.jsxs("div",{className:"flex flex-col items-center gap-8",children:[e.jsx("div",{className:"w-16 h-16 border-4 border-brand-primary border-t-transparent rounded-full animate-spin"}),e.jsxs("div",{className:"text-center",children:[e.jsx("h1",{className:"text-2xl font-bold text-scale-600 mb-2",children:"결제를 처리하고 있습니다"}),e.jsx("p",{className:"text-scale-500",children:"잠시만 기다려주세요..."})]})]})}):n==="error"?e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-bg-default",children:e.jsxs("div",{className:"flex flex-col items-center gap-8 text-center",children:[e.jsx("div",{className:"w-20 h-20 bg-red-100 rounded-full flex items-center justify-center",children:e.jsx("span",{className:"text-4xl",children:"❌"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-scale-600 mb-2",children:"결제 실패"}),e.jsx("p",{className:"text-scale-500",children:x?.message})]}),e.jsx(o,{variant:"primary",size:"large",onClick:()=>s("/"),children:"메인으로 돌아가기"})]})}):e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-bg-default",children:e.jsxs("div",{className:"flex flex-col items-center gap-8 text-center",children:[e.jsx("div",{className:"w-20 h-20 bg-green-100 rounded-full flex items-center justify-center",children:e.jsx("span",{className:"text-4xl",children:"✅"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-scale-600 mb-2",children:"결제가 완료되었습니다!"}),e.jsx("p",{className:"text-scale-500 mb-1",children:"포인트가 성공적으로 충전되었습니다."}),e.jsx("p",{className:"text-sm text-scale-400",children:"잠시 후 이전 페이지로 이동합니다..."})]}),e.jsx(o,{variant:"primary",size:"large",onClick:()=>s(-1),children:"바로 이전 페이지로"})]})})}const h=s=>{const a=m();r.useEffect(()=>{if(!s)return;localStorage.removeItem("tid");const t=sessionStorage.getItem("returnTo")||"/";sessionStorage.removeItem("returnTo"),setTimeout(()=>{a(t,{replace:!0})},3e3)},[s])};export{j as default};
